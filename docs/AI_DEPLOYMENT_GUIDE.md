# ğŸ¤– AIå¢å¼ºè§£è¯»åŠŸèƒ½ - éƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [åŠŸèƒ½æ¦‚è¿°](#åŠŸèƒ½æ¦‚è¿°)
2. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
3. [Verceléƒ¨ç½²æ­¥éª¤](#verceléƒ¨ç½²æ­¥éª¤)
4. [ç¯å¢ƒå˜é‡é…ç½®](#ç¯å¢ƒå˜é‡é…ç½®)
5. [ç”¨æˆ·ä½¿ç”¨æŒ‡å—](#ç”¨æˆ·ä½¿ç”¨æŒ‡å—)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
7. [æˆæœ¬ä¼°ç®—](#æˆæœ¬ä¼°ç®—)

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

### å·²å®ç°çš„åŠŸèƒ½

âœ… **æ”¯æŒè‡ªå®šä¹‰APIæ¥å£å’ŒKey**
- ç”¨æˆ·å¯ä»¥é€‰æ‹©ä½¿ç”¨é»˜è®¤æœåŠ¡æˆ–è‡ªå·±çš„API
- æ”¯æŒå¤šç§AIæœåŠ¡æä¾›å•†ï¼ˆOpenAIã€Azureã€é€šä¹‰åƒé—®ã€æ–‡å¿ƒä¸€è¨€ç­‰ï¼‰
- API Keyå®‰å…¨å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨æœ¬åœ°

âœ… **Vercel Edge Function**
- API Keyåœ¨æœåŠ¡å™¨ç«¯å®‰å…¨éšè—
- å…¨çƒCDNåŠ é€Ÿ
- å®Œå…¨å…è´¹ï¼ˆæ¯æœˆ100ä¸‡æ¬¡è¯·æ±‚ï¼‰

âœ… **æ™ºèƒ½è§£è¯»**
- æ•´ä½“è§£è¯»ï¼šåˆ†æå åœçš„æ ¸å¿ƒä¸»é¢˜
- é€ç‰Œè§£æï¼šè¯¦ç»†è§£è¯»æ¯å¼ ç‰Œçš„æ·±å±‚å«ä¹‰
- ç‰Œç»„äº’åŠ¨ï¼šåˆ†æç‰Œä¸ç‰Œä¹‹é—´çš„å…³è”
- å®ç”¨å»ºè®®ï¼šæä¾›å…·ä½“å¯æ“ä½œçš„è¡ŒåŠ¨å»ºè®®
- æ³¨æ„äº‹é¡¹ï¼šæŒ‡å‡ºæ½œåœ¨é—®é¢˜å’ŒæŒ‘æˆ˜

âœ… **ä¼˜é›…çš„ç”¨æˆ·ä½“éªŒ**
- é¦–æ¬¡ä½¿ç”¨æ¬¢è¿å¼•å¯¼
- å¯è§†åŒ–è®¾ç½®ç•Œé¢
- åŠ è½½åŠ¨ç”»å’Œè¿›åº¦æç¤º
- é”™è¯¯å¤„ç†å’Œé™çº§æ–¹æ¡ˆ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- GitHubè´¦å·
- Vercelè´¦å·ï¼ˆå…è´¹ï¼Œç”¨GitHubç™»å½•å³å¯ï¼‰
- OpenAI API Keyï¼ˆå¯é€‰ï¼Œå¦‚æœä½¿ç”¨é»˜è®¤æœåŠ¡åˆ™ä¸éœ€è¦ï¼‰

### 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

```bash
# 1. å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®åˆ°æœ¬åœ°
git clone https://github.com/your-username/tarot-reading.git
cd tarot-reading

# 2. æ¨é€åˆ°ä½ çš„GitHubä»“åº“
git remote set-url origin https://github.com/your-username/your-repo.git
git push -u origin main

# 3. è®¿é—® https://vercel.com å¹¶ç”¨GitHubç™»å½•

# 4. ç‚¹å‡» "Import Project" é€‰æ‹©ä½ çš„ä»“åº“

# 5. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

# 6. ç‚¹å‡» "Deploy" å®Œæˆï¼
```

---

## ğŸ“¦ Verceléƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1ï¼šæ³¨å†ŒVercelè´¦å·

1. è®¿é—® [https://vercel.com](https://vercel.com)
2. ç‚¹å‡» "Sign Up"
3. é€‰æ‹© "Continue with GitHub"
4. æˆæƒVercelè®¿é—®ä½ çš„GitHubè´¦å·

### æ­¥éª¤2ï¼šå¯¼å…¥é¡¹ç›®

1. åœ¨Vercelæ§åˆ¶å°ï¼Œç‚¹å‡» "Add New..." â†’ "Project"
2. é€‰æ‹©ä½ çš„GitHubä»“åº“
3. ç‚¹å‡» "Import"

### æ­¥éª¤3ï¼šé…ç½®é¡¹ç›®

**Framework Preset**: é€‰æ‹© "Other"ï¼ˆæˆ–ç•™ç©ºï¼‰

**Root Directory**: `.`ï¼ˆé»˜è®¤ï¼‰

**Build Command**: ç•™ç©ºï¼ˆçº¯å‰ç«¯é¡¹ç›®ï¼‰

**Output Directory**: `.`ï¼ˆé»˜è®¤ï¼‰

### æ­¥éª¤4ï¼šé…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³æä¾›é»˜è®¤çš„AIæœåŠ¡ï¼Œå¯ä»¥æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|--------|
| `DEFAULT_AI_ENDPOINT` | é»˜è®¤APIç«¯ç‚¹ | `https://api.openai.com/v1/chat/completions` |
| `DEFAULT_AI_KEY` | é»˜è®¤API Key | `sk-...` |
| `DEFAULT_AI_MODEL` | é»˜è®¤æ¨¡å‹ | `gpt-3.5-turbo` |

**æ·»åŠ æ–¹æ³•**ï¼š
1. åœ¨é¡¹ç›®è®¾ç½®ä¸­ï¼Œç‚¹å‡» "Environment Variables"
2. æ·»åŠ å˜é‡åå’Œå€¼
3. é€‰æ‹©ç¯å¢ƒï¼šProduction, Preview, Development
4. ç‚¹å‡» "Save"

### æ­¥éª¤5ï¼šéƒ¨ç½²

1. ç‚¹å‡» "Deploy"
2. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸1-2åˆ†é’Ÿï¼‰
3. è®¿é—®ä½ çš„ç½‘ç«™ï¼

---

## ğŸ” ç¯å¢ƒå˜é‡é…ç½®

### æ–¹æ¡ˆAï¼šæä¾›é»˜è®¤æœåŠ¡ï¼ˆæ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- ç”¨æˆ·æ— éœ€é…ç½®ï¼Œå¼€ç®±å³ç”¨
- æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ

**ç¼ºç‚¹**ï¼š
- ä½ éœ€è¦æ”¯ä»˜APIè´¹ç”¨
- éœ€è¦ç®¡ç†APIé…é¢

**é…ç½®**ï¼š
```env
DEFAULT_AI_ENDPOINT=https://api.openai.com/v1/chat/completions
DEFAULT_AI_KEY=sk-your-openai-api-key-here
DEFAULT_AI_MODEL=gpt-3.5-turbo
```

### æ–¹æ¡ˆBï¼šç”¨æˆ·è‡ªå¸¦API Key

**ä¼˜ç‚¹**ï¼š
- ä½ ä¸éœ€è¦æ”¯ä»˜è´¹ç”¨
- ç”¨æˆ·å®Œå…¨æ§åˆ¶ä½¿ç”¨é‡

**ç¼ºç‚¹**ï¼š
- ç”¨æˆ·éœ€è¦è‡ªå·±é…ç½®
- éƒ¨åˆ†ç”¨æˆ·å¯èƒ½ä¸ä¼šä½¿ç”¨

**é…ç½®**ï¼š
ä¸éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç”¨æˆ·åœ¨ç½‘ç«™ä¸Šé…ç½®å³å¯ã€‚

### æ–¹æ¡ˆCï¼šæ··åˆæ¨¡å¼ï¼ˆæœ€ä½³ï¼‰

**ä¼˜ç‚¹**ï¼š
- æä¾›é»˜è®¤æœåŠ¡ä¾›å¿«é€Ÿä½“éªŒ
- é«˜çº§ç”¨æˆ·å¯ä»¥ä½¿ç”¨è‡ªå·±çš„API
- çµæ´»æ€§æœ€é«˜

**é…ç½®**ï¼š
è®¾ç½®é»˜è®¤ç¯å¢ƒå˜é‡ï¼ŒåŒæ—¶å…è®¸ç”¨æˆ·è‡ªå®šä¹‰ã€‚

---

## ğŸ‘¥ ç”¨æˆ·ä½¿ç”¨æŒ‡å—

### é¦–æ¬¡ä½¿ç”¨

1. **è®¿é—®ç½‘ç«™**
   - é¦–æ¬¡è®¿é—®ä¼šçœ‹åˆ°AIåŠŸèƒ½æ¬¢è¿æç¤º

2. **é€‰æ‹©AIæœåŠ¡**
   - **ä½¿ç”¨é»˜è®¤æœåŠ¡**ï¼šæ— éœ€é…ç½®ï¼Œç›´æ¥å¯ç”¨
   - **ä½¿ç”¨è‡ªå·±çš„API**ï¼šéœ€è¦é…ç½®API Key

3. **å¼€å§‹å åœ**
   - é€‰æ‹©ç‰Œé˜µï¼ŒæŠ½å–å¡”ç½—ç‰Œ
   - æŸ¥çœ‹åŸºç¡€è§£è¯»
   - ç­‰å¾…AIç”Ÿæˆæ·±åº¦è§£è¯»

### é…ç½®è‡ªå·±çš„API

1. **ç‚¹å‡»å³ä¸Šè§’çš„ğŸ¤–æŒ‰é’®**

2. **é€‰æ‹©AIæœåŠ¡æä¾›å•†**
   - OpenAI (ChatGPT)
   - Azure OpenAI
   - é€šä¹‰åƒé—®ï¼ˆé˜¿é‡Œäº‘ï¼‰
   - æ–‡å¿ƒä¸€è¨€ï¼ˆç™¾åº¦ï¼‰
   - è‡ªå®šä¹‰

3. **å¡«å†™é…ç½®ä¿¡æ¯**
   - APIç«¯ç‚¹
   - API Key
   - æ¨¡å‹é€‰æ‹©

4. **æµ‹è¯•è¿æ¥**
   - ç‚¹å‡»"æµ‹è¯•è¿æ¥"æŒ‰é’®
   - ç¡®è®¤é…ç½®æ­£ç¡®

5. **ä¿å­˜è®¾ç½®**

### è·å–API Key

#### OpenAI
1. è®¿é—® [https://platform.openai.com/api-keys](https://platform.openai.com/api-keys)
2. ç™»å½•æˆ–æ³¨å†Œè´¦å·
3. ç‚¹å‡» "Create new secret key"
4. å¤åˆ¶API Keyï¼ˆæ ¼å¼ï¼šsk-...ï¼‰
5. æ–°ç”¨æˆ·æœ‰$5å…è´¹é¢åº¦

#### é€šä¹‰åƒé—®ï¼ˆé˜¿é‡Œäº‘ï¼‰
1. è®¿é—® [https://dashscope.console.aliyun.com/apiKey](https://dashscope.console.aliyun.com/apiKey)
2. ç™»å½•é˜¿é‡Œäº‘è´¦å·
3. åˆ›å»ºAPI Key
4. å¤åˆ¶å¯†é’¥

#### æ–‡å¿ƒä¸€è¨€ï¼ˆç™¾åº¦ï¼‰
1. è®¿é—® [https://console.bce.baidu.com/qianfan/ais/console/applicationConsole/application](https://console.bce.baidu.com/qianfan/ais/console/applicationConsole/application)
2. ç™»å½•ç™¾åº¦è´¦å·
3. åˆ›å»ºåº”ç”¨
4. è·å–API Keyå’ŒSecret Key

---

## â“ å¸¸è§é—®é¢˜

### Q1: éƒ¨ç½²åAIåŠŸèƒ½ä¸å¯ç”¨ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®è®¤ `api/ai-reading.js` æ–‡ä»¶å­˜åœ¨
2. æ£€æŸ¥Verceléƒ¨ç½²æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯
3. åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹æ˜¯å¦æœ‰ç½‘ç»œé”™è¯¯
4. ç¡®è®¤ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®

### Q2: API Keyå®‰å…¨å—ï¼Ÿ

**A**: 
- å¦‚æœä½¿ç”¨é»˜è®¤æœåŠ¡ï¼šAPI Keyå­˜å‚¨åœ¨Vercelç¯å¢ƒå˜é‡ä¸­ï¼Œå®Œå…¨å®‰å…¨
- å¦‚æœç”¨æˆ·è‡ªå®šä¹‰ï¼šAPI Keyå­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨çš„localStorageä¸­ï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨

### Q3: ä¼šäº§ç”Ÿå¤šå°‘è´¹ç”¨ï¼Ÿ

**A**: 
- **Vercel**: å®Œå…¨å…è´¹ï¼ˆæ¯æœˆ100ä¸‡æ¬¡è¯·æ±‚ï¼‰
- **OpenAI**: 
  - gpt-3.5-turbo: $0.002/1K tokens
  - æ¯æ¬¡è§£è¯»çº¦500-1000 tokens
  - æ¯æ¬¡è§£è¯»æˆæœ¬çº¦ $0.001-0.002ï¼ˆ0.007-0.014å…ƒï¼‰
  - æ–°ç”¨æˆ·æœ‰$5å…è´¹é¢åº¦

### Q4: å¦‚ä½•é™åˆ¶APIä½¿ç”¨é‡ï¼Ÿ

**A**: 
1. åœ¨OpenAIæ§åˆ¶å°è®¾ç½®ä½¿ç”¨é™é¢
2. åœ¨ä»£ç ä¸­æ·»åŠ é€Ÿç‡é™åˆ¶
3. ä½¿ç”¨Vercelçš„Edge Configå­˜å‚¨ä½¿ç”¨ç»Ÿè®¡

### Q5: æ”¯æŒå“ªäº›AIæ¨¡å‹ï¼Ÿ

**A**: 
- OpenAI: gpt-4, gpt-4-turbo, gpt-3.5-turbo
- Azure OpenAI: gpt-4, gpt-35-turbo
- é€šä¹‰åƒé—®: qwen-turbo, qwen-plus, qwen-max
- æ–‡å¿ƒä¸€è¨€: ERNIE-Bot, ERNIE-Bot-turbo
- ä»»ä½•å…¼å®¹OpenAI APIæ ¼å¼çš„æœåŠ¡

### Q6: AIè§£è¯»è´¨é‡å¦‚ä½•æå‡ï¼Ÿ

**A**: 
1. ä½¿ç”¨æ›´å¼ºå¤§çš„æ¨¡å‹ï¼ˆå¦‚gpt-4ï¼‰
2. ä¼˜åŒ–æç¤ºè¯ï¼ˆåœ¨ `api/ai-reading.js` ä¸­ä¿®æ”¹ï¼‰
3. å¢åŠ temperatureå‚æ•°è·å¾—æ›´æœ‰åˆ›æ„çš„è§£è¯»
4. æä¾›æ›´è¯¦ç»†çš„é—®é¢˜æè¿°

### Q7: å¦‚ä½•è‡ªå®šä¹‰AIæç¤ºè¯ï¼Ÿ

**A**: 
ç¼–è¾‘ `api/ai-reading.js` æ–‡ä»¶ä¸­çš„ `buildPrompt` å‡½æ•°ï¼š

```javascript
function buildPrompt(cards, spread, question) {
    // åœ¨è¿™é‡Œè‡ªå®šä¹‰ä½ çš„æç¤ºè¯
    let prompt = `ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å¡”ç½—ç‰Œå åœå¸ˆ...`;
    // ...
    return prompt;
}
```

### Q8: å¯ä»¥æ·»åŠ å…¶ä»–AIæœåŠ¡å—ï¼Ÿ

**A**: 
å¯ä»¥ï¼åœ¨ `js/modules/ai-settings.js` ä¸­çš„ `AI_PRESETS` å¯¹è±¡æ·»åŠ æ–°çš„é…ç½®ï¼š

```javascript
const AI_PRESETS = {
    // ... ç°æœ‰é…ç½®
    myai: {
        name: 'æˆ‘çš„AIæœåŠ¡',
        endpoint: 'https://my-ai-api.com/v1/chat',
        models: ['model-1', 'model-2'],
        defaultModel: 'model-1',
        keyFormat: 'your-key-format',
        docs: 'https://docs.my-ai.com'
    }
};
```

---

## ğŸ’° æˆæœ¬ä¼°ç®—

### å…è´¹é¢åº¦

| æœåŠ¡ | å…è´¹é¢åº¦ | è¯´æ˜ |
|------|----------|------|
| Vercel | 100ä¸‡æ¬¡è¯·æ±‚/æœˆ | è¶³å¤Ÿä¸ªäººé¡¹ç›®ä½¿ç”¨ |
| OpenAI | $5ï¼ˆæ–°ç”¨æˆ·ï¼‰ | çº¦2500-5000æ¬¡è§£è¯» |
| é€šä¹‰åƒé—® | 100ä¸‡tokens/æœˆ | çº¦1000-2000æ¬¡è§£è¯» |

### ä»˜è´¹æˆæœ¬ï¼ˆOpenAIï¼‰

å‡è®¾æ¯å¤©ä½¿ç”¨æƒ…å†µï¼š

| ä½¿ç”¨é‡ | Tokenæ¶ˆè€— | æœˆæˆæœ¬ï¼ˆgpt-3.5-turboï¼‰ | æœˆæˆæœ¬ï¼ˆgpt-4ï¼‰ |
|--------|-----------|------------------------|----------------|
| 10æ¬¡/å¤© | 300K tokens | $0.60 | $9.00 |
| 50æ¬¡/å¤© | 1.5M tokens | $3.00 | $45.00 |
| 100æ¬¡/å¤© | 3M tokens | $6.00 | $90.00 |

**å»ºè®®**ï¼š
- ä¸ªäººä½¿ç”¨ï¼šgpt-3.5-turboå®Œå…¨å¤Ÿç”¨
- å•†ä¸šé¡¹ç›®ï¼šè€ƒè™‘ä½¿ç”¨gpt-4æå‡è´¨é‡
- è®¾ç½®ä½¿ç”¨é™é¢é¿å…è¶…æ”¯

---

## ğŸ”§ é«˜çº§é…ç½®

### æ·»åŠ é€Ÿç‡é™åˆ¶

åœ¨ `api/ai-reading.js` ä¸­æ·»åŠ ï¼š

```javascript
// ç®€å•çš„å†…å­˜é€Ÿç‡é™åˆ¶ï¼ˆé‡å¯åé‡ç½®ï¼‰
const rateLimiter = new Map();

export default async function handler(req, res) {
    const ip = req.headers['x-forwarded-for'] || req.connection.remoteAddress;
    const now = Date.now();
    const limit = 10; // æ¯å°æ—¶10æ¬¡
    const window = 60 * 60 * 1000; // 1å°æ—¶
    
    // æ£€æŸ¥é€Ÿç‡é™åˆ¶
    const userRequests = rateLimiter.get(ip) || [];
    const recentRequests = userRequests.filter(time => now - time < window);
    
    if (recentRequests.length >= limit) {
        return res.status(429).json({
            success: false,
            error: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•'
        });
    }
    
    // è®°å½•è¯·æ±‚
    recentRequests.push(now);
    rateLimiter.set(ip, recentRequests);
    
    // ... åŸæœ‰ä»£ç 
}
```

### æ·»åŠ ä½¿ç”¨ç»Ÿè®¡

ä½¿ç”¨Vercel KVæˆ–å…¶ä»–æ•°æ®åº“è®°å½•ä½¿ç”¨æƒ…å†µï¼š

```javascript
// ä½¿ç”¨Vercel KV
import { kv } from '@vercel/kv';

// è®°å½•ä½¿ç”¨
await kv.incr('ai-requests-total');
await kv.incr(`ai-requests-${new Date().toISOString().slice(0, 10)}`);
```

### è‡ªå®šä¹‰é”™è¯¯å¤„ç†

```javascript
// åœ¨ api/ai-reading.js ä¸­
if (!response.ok) {
    // æ ¹æ®ä¸åŒé”™è¯¯è¿”å›å‹å¥½æç¤º
    if (response.status === 401) {
        return res.status(401).json({
            success: false,
            error: 'API Keyæ— æ•ˆï¼Œè¯·æ£€æŸ¥é…ç½®'
        });
    } else if (response.status === 429) {
        return res.status(429).json({
            success: false,
            error: 'APIé…é¢å·²ç”¨å®Œï¼Œè¯·ç¨åé‡è¯•'
        });
    }
    // ...
}
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Vercelå®˜æ–¹æ–‡æ¡£](https://vercel.com/docs)
- [OpenAI APIæ–‡æ¡£](https://platform.openai.com/docs)
- [é€šä¹‰åƒé—®APIæ–‡æ¡£](https://help.aliyun.com/zh/dashscope/)
- [æ–‡å¿ƒä¸€è¨€APIæ–‡æ¡£](https://cloud.baidu.com/doc/WENXINWORKSHOP/index.html)

---

## ğŸ‰ æ€»ç»“

### ä½ ç°åœ¨æ‹¥æœ‰ï¼š

âœ… å®Œæ•´çš„AIå¢å¼ºè§£è¯»åŠŸèƒ½  
âœ… æ”¯æŒè‡ªå®šä¹‰APIæ¥å£å’ŒKey  
âœ… å®‰å…¨çš„Verceléƒ¨ç½²æ–¹æ¡ˆ  
âœ… ä¼˜é›…çš„ç”¨æˆ·ä½“éªŒ  
âœ… è¯¦ç»†çš„éƒ¨ç½²æ–‡æ¡£  

### ä¸‹ä¸€æ­¥ï¼š

1. éƒ¨ç½²åˆ°Vercel
2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
3. æµ‹è¯•AIåŠŸèƒ½
4. åˆ†äº«ç»™ç”¨æˆ·ä½¿ç”¨ï¼

**ç¥ä½ éƒ¨ç½²é¡ºåˆ©ï¼** ğŸš€âœ¨

---

**æ›´æ–°æ—¶é—´**ï¼š2026-02-03  
**ç‰ˆæœ¬**ï¼šv1.0  
**ä½œè€…**ï¼šCodeWiz AI Assistant
